<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Discord успешно привязан</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="
  margin:0;
  padding:0;
  background:#000;
  color:#fff;
  width:100%;
  height:100vh;
  font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
">

  <div style="
    text-align:center;
    padding:0 20px;
    max-width:520px;
    transform: translateY(-20px);
  ">

    <!-- SVG галочка -->
    <svg width="70" height="55" viewBox="0 0 180 140" fill="none"
         xmlns="http://www.w3.org/2000/svg"
         style="margin-bottom:18px;"
         class="checkmark">
      <defs>
        <filter id="glow">
          <feGaussianBlur stdDeviation="6" result="coloredBlur"/>
          <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <path
        d="M20 75 L70 120 L160 20"
        stroke="#CCFB55"
        stroke-width="14"
        stroke-linecap="round"
        stroke-linejoin="round"
        fill="none"
        filter="url(#glow)"
        class="check-path"
      />
    </svg>

    <div style="font-size:20px;font-weight:700;margin-bottom:10px;">
      Discord успешно привязан
    </div>

    <div style="font-size:15px;opacity:0.9;margin-bottom:22px;">
      Сейчас вы будете автоматически<br>
      перенаправлены в Telegram
    </div>

    <a id="tg-link"
       style="
         display:inline-block;
         background:#CCFB55;
         color:#000;
         text-decoration:none;
         font-size:14px;
         font-weight:600;
         padding:10px 18px;
         border-radius:14px;
       ">
      Открыть Telegram
    </a>

  </div>

  <style>
    .check-path {
      stroke-dasharray: 260;
      stroke-dashoffset: 260;
      animation: drawCheck 0.9s ease-out forwards,
                 bounceCheck 0.4s ease-out 0.9s forwards;
    }
    @keyframes drawCheck { to { stroke-dashoffset: 0; } }
    @keyframes bounceCheck {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }
  </style>

  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const code = params.get('code');
      const state = params.get('state');

      if (code && state) {
        fetch('https://discord-telegram-link.pewdiepiep743.workers.dev/discord/callback', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ code, state })
        });

        const tgUrl = 'https://t.me/notcryptogodxbot?start=discord_linked_' + encodeURIComponent(state);
        document.getElementById('tg-link').href = tgUrl;

        setTimeout(() => {
          window.location.replace(tgUrl);
        }, 2000);
      }
    })();
  </script>

</body>
</html>




